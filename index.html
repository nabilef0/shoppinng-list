<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Shopping List</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="bg-white p-6 rounded-xl shadow-xl w-full max-w-md">
    <h2 class="text-2xl font-bold mb-4 text-center">Shopping List</h2>

    <input type="text" id="itemName" placeholder="Nama barang" class="w-full p-2 mb-2 border rounded">
    <input type="number" id="itemPrice" placeholder="Harga" class="w-full p-2 mb-4 border rounded">
    <input type="text" id="itemCategory" placeholder="Kategori (opsional)" class="w-full p-2 mb-4 border rounded">
    <button onclick="addItem()" class="w-full bg-blue-500 text-white p-2 rounded hover:bg-blue-600">Tambah</button>

    <div class="mt-4">
      <label class="block mb-1 font-medium">Filter Kategori:</label>
      <select id="categoryFilter" class="w-full p-2 border rounded" onchange="filterItems()">
        <option value="">Semua</option>
      </select>
    </div>

    <ul id="shoppingList" class="mt-4 space-y-2"></ul>
    <div class="mt-4 text-right font-semibold text-lg">
      Total: Rp <span id="totalPrice">0</span>
    </div>
  </div>

  <script>
    const list = document.getElementById("shoppingList");
    const totalDisplay = document.getElementById("totalPrice");
    const categoryFilter = document.getElementById("categoryFilter");
    let total = 0;
    let items = JSON.parse(localStorage.getItem("shoppingItems")) || [];

    function saveItems() {
      localStorage.setItem("shoppingItems", JSON.stringify(items));
    }

    function updateCategoryOptions() {
      const categories = [...new Set(items.map(item => item.category).filter(Boolean))];
      categoryFilter.innerHTML = '<option value="">Semua</option>' +
        categories.map(cat => `<option value="${cat}">${cat}</option>`).join("");
    }

    function renderItems() {
      list.innerHTML = "";
      total = 0;
      const filter = categoryFilter.value;
      items.forEach((item, index) => {
        if (filter && item.category !== filter) return;

        const li = document.createElement("li");
        li.className = "flex justify-between items-center bg-gray-200 p-2 rounded";

        const span = document.createElement("span");
        span.textContent = `${item.name} - Rp${item.price.toLocaleString("id-ID")}${item.category ? ` (${item.category})` : ""}`;

        const delBtn = document.createElement("button");
        delBtn.textContent = "âœ•";
        delBtn.className = "text-red-500 hover:text-red-700 font-bold";
        delBtn.onclick = () => {
          items.splice(index, 1);
          saveItems();
          updateCategoryOptions();
          renderItems();
        };

        li.appendChild(span);
        li.appendChild(delBtn);
        list.appendChild(li);

        total += item.price;
      });
      totalDisplay.textContent = total.toLocaleString("id-ID");
    }

    function addItem() {
      const name = document.getElementById("itemName").value.trim();
      const price = parseFloat(document.getElementById("itemPrice").value);
      const category = document.getElementById("itemCategory").value.trim();

      if (!name || isNaN(price)) return;

      items.push({ name, price, category });
      saveItems();
      updateCategoryOptions();
      renderItems();

      document.getElementById("itemName").value = "";
      document.getElementById("itemPrice").value = "";
      document.getElementById("itemCategory").value = "";
    }

    function filterItems() {
      renderItems();
    }

    // Inisialisasi saat halaman dimuat
    updateCategoryOptions();
    renderItems();
  </script>
</body>
</html>
